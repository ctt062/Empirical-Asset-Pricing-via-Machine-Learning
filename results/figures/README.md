# Figures Directory Organization

This directory contains all visualization outputs organized by category.

## Directory Structure

```
figures/
├── architecture/          # System architecture diagrams
│   └── architecture_diagram.png
│
├── benchmarks/           # Baseline model performance plots
│   ├── benchmark_ls_ew.png      # OLS-3 equal-weighted long-short
│   └── benchmark_ls_vw.png      # OLS-3 value-weighted long-short
│
├── model_comparison/     # Multi-model comparison plots
│   ├── all_models_sharpe_comparison.png
│   ├── all_models_cumulative_returns.png
│   ├── all_models_return_distribution.png
│   ├── comparison_cumulative_returns_ew.png
│   ├── comparison_monthly_r2.png
│   └── comparison_sharpe_ratios.png
│
├── feature_analysis/     # Feature importance and interpretability
│   ├── feature_importance.png
│   ├── feature_group_importance.png
│   ├── shap_summary.png
│   └── shap_dependence/         # SHAP dependence plots
│       ├── shap_dependence_indmom.png
│       ├── shap_dependence_herf.png
│       ├── shap_dependence_mve_ia.png
│       ├── shap_dependence_bm_ia.png
│       └── shap_dependence_sic2.png
│
└── diagnostics/          # Debugging and historical analysis
    ├── comprehensive_results.png
    ├── comprehensive_results_visualization.png
    ├── fix_explanation_visualization.png
    ├── fix_summary.png
    └── target_variable_comparison.png
```

## Figure Categories

### 1. **architecture/**
System design and workflow diagrams showing the overall project structure, model pipeline, and evaluation framework.

**Generated by:**
- `scripts/visualize_architecture.py`

### 2. **benchmarks/**
Performance plots for baseline models (OLS-3), used for comparison against machine learning approaches.

**Generated by:**
- `src/02_baseline_benchmark.py`

### 3. **model_comparison/**
Comparative visualizations showing all 4 models (Fama-French, OLS-3, Elastic Net, GBRT) side-by-side.

**Generated by:**
- `src/04_evaluation.py` - GBRT vs OLS-3 comparison
- `src/06_unified_evaluation.py` - All 4 models comparison

### 4. **feature_analysis/**
Feature importance analysis, SHAP values, and model interpretability visualizations.

**Generated by:**
- `src/05_feature_importance.py`

**Contains:**
- Global feature importance (gain and split count)
- Feature group importance (momentum, value, liquidity, etc.)
- SHAP summary plots
- SHAP dependence plots for top features

### 5. **diagnostics/**
Historical debugging plots and development visualizations. These document the evolution of the project and bug fixes.

**Purpose:**
- Archive of previous analysis
- Documentation of issues and resolutions
- Target variable comparison studies

## File Naming Conventions

### Prefixes
- `all_models_*` - Comparison of all 4 models
- `comparison_*` - Comparison of 2 models (typically GBRT vs OLS-3)
- `benchmark_*` - OLS-3 baseline results
- `feature_*` - Feature importance analysis
- `shap_*` - SHAP interpretability plots
- `fix_*` - Bug fix documentation
- `comprehensive_*` - Overview/summary visualizations

### Suffixes
- `*_ew` - Equal-weighted portfolio
- `*_vw` - Value-weighted portfolio
- `*_ls` - Long-short strategy

## Usage in Scripts

### Updating Figure Paths
When adding new visualizations, save them to the appropriate subdirectory:

```python
# Model comparison
save_path = "results/figures/model_comparison/my_new_plot.png"

# Feature analysis
save_path = "results/figures/feature_analysis/my_analysis.png"

# Benchmarks
save_path = "results/figures/benchmarks/my_benchmark.png"

# Architecture
save_path = "results/figures/architecture/my_diagram.png"

# Diagnostics (for debugging/temporary plots)
save_path = "results/figures/diagnostics/debug_plot.png"
```

### Ensuring Directories Exist
Use the `ensure_dir()` utility function:

```python
from pathlib import Path
from src.utils import ensure_dir

save_path = Path("results/figures/model_comparison/my_plot.png")
ensure_dir(save_path.parent)
plt.savefig(save_path)
```

## For Presentation

### Recommended Figures for Slides

**Introduction (Slide 1-2):**
- `architecture/architecture_diagram.png` - Show overall framework

**Methodology (Slide 3-4):**
- `architecture/architecture_diagram.png` - Model pipeline

**Results (Slide 5-8):**
- `model_comparison/all_models_sharpe_comparison.png` - Performance comparison
- `model_comparison/all_models_cumulative_returns.png` - Time series performance
- `model_comparison/comparison_sharpe_ratios.png` - Bar chart comparison

**Interpretability (Slide 9-10):**
- `feature_analysis/feature_importance.png` - Top predictors
- `feature_analysis/feature_group_importance.png` - Feature categories
- `feature_analysis/shap_summary.png` - SHAP analysis

**Conclusions (Slide 11):**
- `model_comparison/all_models_sharpe_comparison.png` - Final comparison

## Maintenance

### Cleaning Up
To remove outdated diagnostic plots:
```bash
cd results/figures/diagnostics
# Review files and remove as needed
```

### Regenerating All Figures
```bash
# Run evaluation pipeline
python src/04_evaluation.py
python src/05_feature_importance.py
python src/06_unified_evaluation.py

# Create architecture diagram
python scripts/visualize_architecture.py
```

## Notes

- All figures are saved in high resolution (300 DPI) for publication quality
- PNG format for easy viewing and embedding in presentations
- Subdirectory structure prevents clutter in main figures/ directory
- Historical plots in diagnostics/ preserved for reference
